const preloader=document.getElementById('preloader');const preloaderProgressBar=document.getElementById('preloader-progress-bar');let progress=0;const interval=setInterval(()=>{progress+=Math.random()*20;if(progress>90){progress=90}
preloaderProgressBar.style.width=progress+'%'},400);window.addEventListener('load',()=>{clearInterval(interval);preloaderProgressBar.style.width='100%';setTimeout(()=>{preloader.classList.add('hidden')},500)});document.addEventListener('DOMContentLoaded',function(){AOS.init({duration:1000,once:!0,offset:50});const menuButton=document.getElementById('menu-button');const sidebar=document.getElementById('sidebar');const closeSidebarButton=document.getElementById('close-sidebar-button');menuButton.addEventListener('click',()=>sidebar.classList.toggle('active'));document.querySelectorAll('.nav-link, .right-column').forEach(element=>{element.addEventListener('click',()=>{if(sidebar.classList.contains('active')){sidebar.classList.remove('active')}})});closeSidebarButton.addEventListener('click',()=>{sidebar.classList.remove('active')});gsap.registerPlugin(ScrollTrigger);gsap.to("#timeline-progress",{height:"100%",ease:"none",scrollTrigger:{trigger:".right-column",start:"top top",end:"bottom bottom",scrub:!0}});const sections=document.querySelectorAll('.section');const timelineItems=document.querySelectorAll('.timeline-item');const timeline=document.querySelector('.timeline');function positionTimelineItems(){const timelineHeight=timeline.offsetHeight;const totalScrollHeight=document.querySelector('.right-column').scrollHeight;sections.forEach((section,index)=>{const timelineItem=timelineItems[index];const sectionTop=section.offsetTop;const positionRatio=sectionTop/totalScrollHeight;const itemTopPosition=positionRatio*timelineHeight;timelineItem.style.top=`${itemTopPosition}px`;ScrollTrigger.create({trigger:section,start:"top center",end:"bottom center",onToggle:self=>{if(self.isActive){timelineItem.classList.add('active')}else{timelineItem.classList.remove('active')}}})})}
window.addEventListener('load',positionTimelineItems);const skillBars=document.querySelectorAll('.progress');skillBars.forEach(bar=>{gsap.fromTo(bar,{width:0},{width:bar.getAttribute('data-progress'),duration:3.0,ease:'power2.out',scrollTrigger:{trigger:bar.closest('.skill-item'),start:'top 80%',toggleActions:'play none none none'}})});const swiper=new Swiper('.swiper-container',{loop:!0,pagination:{el:'.swiper-pagination',clickable:!0,},autoplay:{delay:3000},effect:'cards',grabCursor:!0,centeredSlides:!0,slidesPerView:'auto',coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0,},});const themeToggle=document.getElementById('theme-toggle');const themeToggleIcon=document.getElementById('theme-toggle-icon');const body=document.body;const logoPic=document.querySelector('.logo-pic');function applySavedTheme(){const savedTheme=localStorage.getItem('theme');if(savedTheme==='dark'){body.classList.add('dark-mode');themeToggleIcon.classList.remove('fa-moon');themeToggleIcon.classList.add('fa-sun');logoPic.setAttribute('src','assets/images/logo-rs-2025.webp')}else{body.classList.remove('dark-mode');themeToggleIcon.classList.remove('fa-sun');themeToggleIcon.classList.add('fa-moon');logoPic.setAttribute('src','assets/images/logo-rs-2025-dark.webp')}}
themeToggle.addEventListener('click',()=>{body.classList.toggle('dark-mode');if(body.classList.contains('dark-mode')){localStorage.setItem('theme','dark');themeToggleIcon.classList.remove('fa-moon');themeToggleIcon.classList.add('fa-sun');logoPic.setAttribute('src','assets/images/logo-rs-2025.webp')}else{localStorage.setItem('theme','light');themeToggleIcon.classList.remove('fa-sun');themeToggleIcon.classList.add('fa-moon');logoPic.setAttribute('src','assets/images/logo-rs-2025-dark.webp')}});applySavedTheme();const backToTopBtn=document.getElementById('back-to-top-btn');const toggleBackToTopBtn=()=>{if(window.scrollY>300){backToTopBtn.classList.add('show')}else{backToTopBtn.classList.remove('show')}};const scrollToTop=()=>{window.scrollTo({top:0,behavior:'smooth'})};window.addEventListener('scroll',toggleBackToTopBtn);backToTopBtn.addEventListener('click',scrollToTop)})